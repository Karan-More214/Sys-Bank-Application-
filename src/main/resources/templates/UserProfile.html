<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Details | Sys Bank</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
     <link rel="shortcut icon" href="../Images/fevicon.png" type="image/x-icon">
    <link rel="stylesheet" th:href="@{/css/UserProfile.css}">
</head>
<body>
    <!-- Sys Bank Header -->
    <header class="sysbank-header">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <div class="sysbank-logo">
                    <i class="fas fa-university me-2"></i>Sys Bank
                </div>
                <nav>
                    <ul class="nav">
                        <li class="nav-item">
                            <a class="nav-link" href="/user/home"><i class="fas fa-home me-1"></i> Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/user/profile"><i class="fas fa-user me-1"></i> Profile</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/main/logout"><i class="fas fa-sign-out-alt me-1"></i> Logout</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Success/Error Messages -->
        <div th:if="${message}" class="alert alert-success alert-dismissible fade show mt-3" role="alert">
            <i class="fas fa-check-circle me-2"></i>
            <span th:text="${message}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        
        <div class="card profile-card">
            <div class="card-header profile-header d-flex align-items-center">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" width="80px" height="80px" viewBox="0 0 134 134" xml:space="preserve"><circle cx="67" cy="67" r="65" fill="#d2d2d2"></circle><path d="M67 2c35.841 0 65 29.159 65 65s-29.159 65-65 65S2 102.841 2 67 31.159 2 67 2m0-1C30.55 1 1 30.55 1 67s29.55 66 66 66 66-29.55 66-66S103.45 1 67 1z" fill="#0c0d0d" opacity=".2"></path><path class="st3" d="M65.92 66.34h2.16c14.802.421 30.928 6.062 29.283 20.349l-1.618 13.322c-.844 6.814-5.208 7.827-13.972 7.865H52.23c-8.765-.038-13.13-1.05-13.974-7.865l-1.62-13.322C34.994 72.402 51.12 66.761 65.92 66.341zM49.432 43.934c0-9.819 7.989-17.81 17.807-17.81 9.822 0 17.81 7.991 17.81 17.81 0 9.819-7.988 17.807-17.81 17.807-9.818 0-17.807-7.988-17.807-17.807z"></path></svg>
                <div>
                    <h5 class="mb-0" th:text="${user.fullName}">Karan More</h5>
                    <small class="text-light" th:text="'Customer ID: SYB' + ${user.id}">Customer ID: SYB789456123</small>
                </div>
            </div>
            <div class="card-body">
                <h5 class="card-title mb-4">Personal Information</h5>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <p class="mb-1 text-muted">Full Name</p>
                        <p class="fw-bold" th:text="${user.fullName}">Karan More</p>
                    </div>
                    <div class="col-md-6">
                        <p class="mb-1 text-muted">Date of Birth</p>
                        <p class="fw-bold" th:text="${bankAccount != null ? bankAccount.dob : 'Not Available'}">15 March 1990</p>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <p class="mb-1 text-muted">Email Address</p>
                        <p class="fw-bold" th:text="${user.email}">morekaran@gmail.com</p>
                    </div>
                    <div class="col-md-6">
                        <p class="mb-1 text-muted">Phone Number</p>
                        <p class="fw-bold" th:text="${bankAccount != null ? bankAccount.phoneNo : 'Not Available'}">+91 98765 43210</p>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-12">
                        <p class="mb-1 text-muted">Residential Address</p>
                        <p class="fw-bold" th:text="${bankAccount != null ? bankAccount.address : 'Not Available'}">123 Kurla, Mumbai<br>Maharashtra 400070<br>India</p>
                    </div>
                </div>
                
                <!-- Additional Bank Account Information -->
                <div th:if="${bankAccount != null}">
                    <hr>
                    <h5 class="card-title mb-3">Account Information</h5>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p class="mb-1 text-muted">Account Type</p>
                            <p class="fw-bold" th:text="${bankAccount.accountType}">Savings Account</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1 text-muted">Account Balance</p>
                            <p class="fw-bold text-success" th:text="'₹ ' + ${bankAccount.balance}">₹ 50,000</p>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p class="mb-1 text-muted">Gender</p>
                            <p class="fw-bold" th:text="${bankAccount.gender}">Male</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-white text-end">
                <button class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#updateProfileModal">
                    <i class="fas fa-edit me-1"></i>Update Details
                </button>
            </div>
        </div>
    </main>

    <!-- Update Profile Modal -->
    <div class="modal fade" id="updateProfileModal" tabindex="-1" aria-labelledby="updateProfileModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="updateProfileModalLabel">
                        <i class="fas fa-user-edit me-2"></i>Update Profile Details
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form th:action="@{/user/updateProfile}" method="post">
                    <div class="modal-body">
                        <!-- Personal Information Section -->
                        <div class="mb-4">
                            <h6 class="text-primary mb-3"><i class="fas fa-user me-2"></i>Update Personal Information</h6>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="fullName" class="form-label">Full Name *</label>
                                    <input type="text" class="form-control" id="fullName" name="fullName" 
                                           th:value="${user.fullName}" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">Email Address *</label>
                                    <input type="email" class="form-control" id="email" name="email" 
                                           th:value="${user.email}" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="username" class="form-label">Username *</label>
                                    <input type="text" class="form-control" id="username" name="username" 
                                           th:value="${user.username}" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="password" class="form-label">New Password</label>
                                    <input type="password" class="form-control" id="password" name="password" 
                                           placeholder="Leave blank to keep current password">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="fas fa-times me-1"></i>Cancel
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-1"></i>Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Sys Bank Footer -->
    <footer class="sysbank-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6 text-center text-md-start">
                    <p>&copy; 2023 Sys Bank. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-center text-md-end footer-links">
                    <a href="#"><i class="fas fa-phone-alt me-1"></i> Contact Us</a>
                    <a href="#"><i class="fas fa-question-circle me-1"></i> Help</a>
                    <a href="#"><i class="fas fa-shield-alt me-1"></i> Security</a>
                    <a href="#"><i class="fas fa-file-alt me-1"></i> Privacy Policy</a>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12 text-center">
                    <small class="text-light">Sys Bank is regulated by the Reserve Bank of India</small>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>